<template name="gaMeDataSheet">
    {{> gaNavbar}}

    <main id="ga-me-datasheet">
        {{> gaFollowupModal exp_id=getExpId user_id=userId mobile=true}}

        {{#if loaded}}
            {{#if showExp}}
                <table class="sheet-table">
                    <tr>
                        <td style="width: 10%;">Date</td>
                        <td style="padding:2px"></td>
                        <td style="padding:10px; width: 40%;">{{getCause}} (Cause)
                            <br>
                            <span class="light-blue-text text-darken-4">{{causeType}}</span>
                        </td>
                        <td style="padding:2px"></td>
                        <td style="padding:10px; width: 40%;">{{getEffect}} (Effect)
                            <br>
                            <span class="light-blue-text text-darken-4">{{effectType}}</span>
                        </td>
                    </tr>
                    {{#each slots}}
                        <tr>
                            <td style="padding: 2px" class="{{today}}">
                                <p style="margin-top:1px; margin-bottom:1px">{{date}}</p>
                            </td>
                            <td class="light-blue-text text-darken-4" style="padding: 2px"></td>
                            {{#if editable}}
                                {{#if noData cause}}
                                    <td class="light-blue-text text-darken-4 {{today}}" style="padding: 2px">
                                        <textarea class="materialize-textarea textarea-cause" id="editCauseData-{{cause_rid}}" rid="{{cause_rid}}" exp-id="{{getExpId}}" placeholder="{{cause}}" required style="margin:8px; min-height: 0rem !important; height: 2rem; padding: 0px;width: calc(100% - 16px);"></textarea>
                                        <button class="btn light-blue saveCauseChange" id="submitCauseBtn-{{cause_rid}}" rid="{{cause_rid}}" index="{{index}}" exp-id="{{getExpId}}" type="submit" style="display: none; margin: 8px;">save</button>
                                    </td>
                                {{else}}
                                    <td class="light-blue-text text-darken-4 {{today}}" style="padding: 2px">
                                        <textarea class="materialize-textarea textarea-cause" id="editCauseData-{{cause_rid}}" rid="{{cause_rid}}" exp-id="{{getExpId}}" required style="margin:8px; min-height: 0rem !important; height: 2rem; padding: 0px;width: calc(100% - 16px);">{{cause}}</textarea>
                                        <button class="btn light-blue saveCauseChange" id="submitCauseBtn-{{cause_rid}}" rid="{{cause_rid}}" index="{{index}}" exp-id="{{getExpId}}" type="submit" style="display: none; margin: 8px;">save</button>
                                    </td>
                                {{/if}}
                                {{#if noData effect}}
                                    <td class="light-blue-text text-darken-4 {{today}}" style="padding: 2px">
                                        <textarea class="materialize-textarea textarea-effect" id="editEffectData-{{effect_rid}}" rid="{{effect_rid}}" exp-id="{{getExpId}}" placeholder="{{effect}}" required style="margin:8px; min-height: 0rem !important; height: 2rem; padding: 0px;width: calc(100% - 16px);"></textarea>
                                        <button class="btn light-blue saveEffectChange" id="submitEffectBtn-{{effect_rid}}" rid="{{effect_rid}}" index="{{index}}" exp-id="{{getExpId}}" type="submit" style="display: none; margin: 8px;">save</button>
                                    </td>
                                {{else}}
                                    <td class="light-blue-text text-darken-4 {{today}}" style="padding: 2px">
                                        <textarea class="materialize-textarea textarea-effect" id="editEffectData-{{effect_rid}}" rid="{{effect_rid}}" exp-id="{{getExpId}}" required style="margin:8px; min-height: 0rem !important; height: 2rem; padding: 0px;width: calc(100% - 16px);">{{effect}}</textarea>
                                        <button class="btn light-blue saveEffectChange" id="submitEffectBtn-{{effect_rid}}" rid="{{effect_rid}}" index="{{index}}" exp-id="{{getExpId}}" type="submit" style="display: none; margin: 8px;">save</button>
                                    </td>
                                {{/if}}
                            {{else}}
                                <td class="light-blue-text text-darken-4" style="padding: 10px; padding-top: 15px; padding-bottom: 15px;">
                                    <span>{{cause}}</span>
                                </td>
                                <td class="light-blue-text text-darken-4" style="padding: 2px"></td>
                                <td class="light-blue-text text-darken-4" style="padding: 10px; padding-top: 15px; padding-bottom: 15px;">
                                    <span>{{effect}}</span>
                                </td>
                            {{/if}}
                        </tr>
                    {{/each}}
                </table>
            {{else}}
                <h4>No experiment to show</h4>
            {{/if}}
        {{else}}
            <h4>Loading Experiment...</h4>
        {{/if}}
    </main>
</template>
